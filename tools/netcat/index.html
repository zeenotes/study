



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>Netcat</title>
      
    
	
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.3020aac5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../assets/css/extra.css">
    
      <link rel="stylesheet" href="../../assets/css/mermaid.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="grey">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#introduction" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="ha2332" class="md-header-nav__button md-logo">
          
            <img src="../../assets/images/logo-black-big.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              ha2332
            </span>
            <span class="md-header-nav__topic">
              Netcat
            </span>
          
        </div>
      </div>
	  <!-- custom code -->
	  <div class="md-flex__cell md-flex__cell--shrink">
        <button id="toggle-sidebar"><i class="material-icons">
			calendar_view_day
		</i></button>
      </div>
	  <!-- custom code -->
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../linux/archiving-backup/" title="Linux" class="md-tabs__link">
          Linux
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../oscp/" title="Oscp" class="md-tabs__link">
          Oscp
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../programming/bash-scripting/" title="Programming" class="md-tabs__link">
          Programming
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../metasploit/" title="Tools" class="md-tabs__link md-tabs__link--active">
          Tools
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="ha2332" class="md-nav__button md-logo">
      
        <img src="../../assets/images/logo-black-big.png" width="48" height="48">
      
    </a>
    ha2332
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Linux
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../linux/archiving-backup/" title="Archiving & Backup" class="md-nav__link">
      Archiving & Backup
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../linux/linux-fundamentals/" title="Linux Fundamentals" class="md-nav__link">
      Linux Fundamentals
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../linux/linux_cmd/" title="Linux Command Line" class="md-nav__link">
      Linux Command Line
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../linux/package-management/" title="Package Management" class="md-nav__link">
      Package Management
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../linux/regular-expressions/" title="Regular Expressions" class="md-nav__link">
      Regular Expressions
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../linux/storage-media/" title="Storage Media" class="md-nav__link">
      Storage Media
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../linux/text-processing/" title="Text Processing" class="md-nav__link">
      Text Processing
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../linux/vi-cheat-sheet/" title="Vi Cheat Sheet" class="md-nav__link">
      Vi Cheat Sheet
    </a>
  </li>

			
        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Oscp
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Oscp
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../oscp/" title="OSCP Prep Guide" class="md-nav__link">
      OSCP Prep Guide
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../oscp/links/" title="OSCP Links" class="md-nav__link">
      OSCP Links
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../oscp/recon/information-gathering/" title="Information Gathering" class="md-nav__link">
      Information Gathering
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../oscp/scanning/network_discovery/" title="Network discovery" class="md-nav__link">
      Network discovery
    </a>
  </li>

			
        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Programming
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Programming
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../programming/bash-scripting/" title="Bash Scripting" class="md-nav__link">
      Bash Scripting
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../programming/c-programming/" title="C Programming" class="md-nav__link">
      C Programming
    </a>
  </li>

			
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../../programming/python-programming/" title="Python Programming" class="md-nav__link">
      Python Programming
    </a>
  </li>

			
        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
			
			  
			  
			  


  <li class="md-nav__item">
    <a href="../metasploit/" title="Metasploit" class="md-nav__link">
      Metasploit
    </a>
  </li>

			
        
			
			  
			  
			  

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Netcat
      </label>
    
    <a href="./" title="Netcat" class="md-nav__link md-nav__link--active">
      Netcat
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uses_of_netcat" title="Uses of Netcat" class="md-nav__link">
    Uses of Netcat
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing_netcat_from_source" title="Installing Netcat From Source" class="md-nav__link">
    Installing Netcat From Source
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modes_of_operation" title="Modes of Operation" class="md-nav__link">
    Modes of Operation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands_and_flags" title="Commands And Flags" class="md-nav__link">
    Commands And Flags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#displaying_help" title="Displaying Help" class="md-nav__link">
    Displaying Help
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying_the_version" title="Displaying the Version" class="md-nav__link">
    Displaying the Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close_at_end_of_the_file" title="Close At End Of The File" class="md-nav__link">
    Close At End Of The File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detach_from_the_console" title="Detach from the Console" class="md-nav__link">
    Detach from the Console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execute_a_specified_program" title="Execute a Specified Program" class="md-nav__link">
    Execute a Specified Program
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise" title="Exercise" class="md-nav__link">
    Exercise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source_routing" title="Source Routing" class="md-nav__link">
    Source Routing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delay_with_an_interval" title="Delay with an Interval" class="md-nav__link">
    Delay with an Interval
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listening_mode" title="Listening Mode" class="md-nav__link">
    Listening Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reopen_netcat_after_close" title="Reopen Netcat After Close" class="md-nav__link">
    Reopen Netcat After Close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow_numeric-only_ip_address" title="Allow Numeric-only Ip Address" class="md-nav__link">
    Allow Numeric-only Ip Address
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#netcat_with_the_-n_option" title="Netcat with the -n option" class="md-nav__link">
    Netcat with the -n option
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcat_without_the_-n_option" title="Netcat without the -n option" class="md-nav__link">
    Netcat without the -n option
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hexdump_of_a_netcat_traffic" title="Hexdump Of A Netcat Traffic" class="md-nav__link">
    Hexdump Of A Netcat Traffic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specify_port_in_netcat" title="Specify Port In Netcat" class="md-nav__link">
    Specify Port In Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scan_ports_in_netcat" title="Scan Ports in Netcat" class="md-nav__link">
    Scan Ports in Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#randomize_ports_in_netcat" title="Randomize Ports in Netcat" class="md-nav__link">
    Randomize Ports in Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing_source_address_of_a_packet" title="Changing Source Address Of A Packet" class="md-nav__link">
    Changing Source Address Of A Packet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcat_and_telnet" title="Netcat and Telnet" class="md-nav__link">
    Netcat and Telnet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp_and_netcat" title="UDP and Netcat" class="md-nav__link">
    UDP and Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcat_and_verbosity" title="Netcat and Verbosity" class="md-nav__link">
    Netcat and Verbosity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network_timeout_and_netcat" title="Network Timeout and Netcat" class="md-nav__link">
    Network Timeout and Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zero_inputoutput_mode" title="Zero Input/output Mode" class="md-nav__link">
    Zero Input/output Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirector_tools" title="Redirector Tools" class="md-nav__link">
    Redirector Tools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic_operations" title="Basic Operations" class="md-nav__link">
    Basic Operations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple_chat_interface" title="Simple Chat Interface" class="md-nav__link">
    Simple Chat Interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port_scanning" title="Port Scanning" class="md-nav__link">
    Port Scanning
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#port_scan_-_comma_separated" title="Port Scan - Comma Separated" class="md-nav__link">
    Port Scan - Comma Separated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port_scan_-_ranges" title="Port Scan - Ranges" class="md-nav__link">
    Port Scan - Ranges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port_scan_-_service" title="Port Scan - Service" class="md-nav__link">
    Port Scan - Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transferring_files" title="Transferring Files" class="md-nav__link">
    Transferring Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#banner_grabbing" title="Banner Grabbing" class="md-nav__link">
    Banner Grabbing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirecting_ports_and_traffic" title="Redirecting Ports and Traffic" class="md-nav__link">
    Redirecting Ports and Traffic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#netcat_penetration_testing_features" title="Netcat Penetration Testing Features" class="md-nav__link">
    Netcat Penetration Testing Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction_1" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#port_scanning_and_service_identification" title="Port Scanning And Service Identification" class="md-nav__link">
    Port Scanning And Service Identification
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using_netcat_as_a_port_scanner" title="Using Netcat as a Port Scanner" class="md-nav__link">
    Using Netcat as a Port Scanner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#banner_grabbing_1" title="Banner Grabbing" class="md-nav__link">
    Banner Grabbing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#egress_firewall_testing" title="Egress Firewall Testing" class="md-nav__link">
    Egress Firewall Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoiding_detection_on_a_window_system" title="Avoiding Detection On A Window System" class="md-nav__link">
    Avoiding Detection On A Window System
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evading_antivirus_detection" title="Evading Antivirus Detection" class="md-nav__link">
    Evading Antivirus Detection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating_a_netcat_backdoor_on_a_windows_xp_or_windows_2003_server" title="Creating A Netcat Backdoor On A Windows Xp Or Windows 2003 Server" class="md-nav__link">
    Creating A Netcat Backdoor On A Windows Xp Or Windows 2003 Server
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

			
        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uses_of_netcat" title="Uses of Netcat" class="md-nav__link">
    Uses of Netcat
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing_netcat_from_source" title="Installing Netcat From Source" class="md-nav__link">
    Installing Netcat From Source
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modes_of_operation" title="Modes of Operation" class="md-nav__link">
    Modes of Operation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands_and_flags" title="Commands And Flags" class="md-nav__link">
    Commands And Flags
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#displaying_help" title="Displaying Help" class="md-nav__link">
    Displaying Help
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying_the_version" title="Displaying the Version" class="md-nav__link">
    Displaying the Version
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#close_at_end_of_the_file" title="Close At End Of The File" class="md-nav__link">
    Close At End Of The File
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detach_from_the_console" title="Detach from the Console" class="md-nav__link">
    Detach from the Console
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#execute_a_specified_program" title="Execute a Specified Program" class="md-nav__link">
    Execute a Specified Program
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise" title="Exercise" class="md-nav__link">
    Exercise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source_routing" title="Source Routing" class="md-nav__link">
    Source Routing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delay_with_an_interval" title="Delay with an Interval" class="md-nav__link">
    Delay with an Interval
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listening_mode" title="Listening Mode" class="md-nav__link">
    Listening Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reopen_netcat_after_close" title="Reopen Netcat After Close" class="md-nav__link">
    Reopen Netcat After Close
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#allow_numeric-only_ip_address" title="Allow Numeric-only Ip Address" class="md-nav__link">
    Allow Numeric-only Ip Address
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#netcat_with_the_-n_option" title="Netcat with the -n option" class="md-nav__link">
    Netcat with the -n option
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcat_without_the_-n_option" title="Netcat without the -n option" class="md-nav__link">
    Netcat without the -n option
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hexdump_of_a_netcat_traffic" title="Hexdump Of A Netcat Traffic" class="md-nav__link">
    Hexdump Of A Netcat Traffic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specify_port_in_netcat" title="Specify Port In Netcat" class="md-nav__link">
    Specify Port In Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scan_ports_in_netcat" title="Scan Ports in Netcat" class="md-nav__link">
    Scan Ports in Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#randomize_ports_in_netcat" title="Randomize Ports in Netcat" class="md-nav__link">
    Randomize Ports in Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing_source_address_of_a_packet" title="Changing Source Address Of A Packet" class="md-nav__link">
    Changing Source Address Of A Packet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcat_and_telnet" title="Netcat and Telnet" class="md-nav__link">
    Netcat and Telnet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp_and_netcat" title="UDP and Netcat" class="md-nav__link">
    UDP and Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netcat_and_verbosity" title="Netcat and Verbosity" class="md-nav__link">
    Netcat and Verbosity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network_timeout_and_netcat" title="Network Timeout and Netcat" class="md-nav__link">
    Network Timeout and Netcat
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zero_inputoutput_mode" title="Zero Input/output Mode" class="md-nav__link">
    Zero Input/output Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redirector_tools" title="Redirector Tools" class="md-nav__link">
    Redirector Tools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic_operations" title="Basic Operations" class="md-nav__link">
    Basic Operations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple_chat_interface" title="Simple Chat Interface" class="md-nav__link">
    Simple Chat Interface
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port_scanning" title="Port Scanning" class="md-nav__link">
    Port Scanning
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#port_scan_-_comma_separated" title="Port Scan - Comma Separated" class="md-nav__link">
    Port Scan - Comma Separated
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port_scan_-_ranges" title="Port Scan - Ranges" class="md-nav__link">
    Port Scan - Ranges
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#port_scan_-_service" title="Port Scan - Service" class="md-nav__link">
    Port Scan - Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transferring_files" title="Transferring Files" class="md-nav__link">
    Transferring Files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#banner_grabbing" title="Banner Grabbing" class="md-nav__link">
    Banner Grabbing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirecting_ports_and_traffic" title="Redirecting Ports and Traffic" class="md-nav__link">
    Redirecting Ports and Traffic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#netcat_penetration_testing_features" title="Netcat Penetration Testing Features" class="md-nav__link">
    Netcat Penetration Testing Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction_1" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#port_scanning_and_service_identification" title="Port Scanning And Service Identification" class="md-nav__link">
    Port Scanning And Service Identification
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using_netcat_as_a_port_scanner" title="Using Netcat as a Port Scanner" class="md-nav__link">
    Using Netcat as a Port Scanner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#banner_grabbing_1" title="Banner Grabbing" class="md-nav__link">
    Banner Grabbing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#egress_firewall_testing" title="Egress Firewall Testing" class="md-nav__link">
    Egress Firewall Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avoiding_detection_on_a_window_system" title="Avoiding Detection On A Window System" class="md-nav__link">
    Avoiding Detection On A Window System
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evading_antivirus_detection" title="Evading Antivirus Detection" class="md-nav__link">
    Evading Antivirus Detection
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating_a_netcat_backdoor_on_a_windows_xp_or_windows_2003_server" title="Creating A Netcat Backdoor On A Windows Xp Or Windows 2003 Server" class="md-nav__link">
    Creating A Netcat Backdoor On A Windows Xp Or Windows 2003 Server
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav> 
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Netcat</h1>
                
                <h2 id="introduction">Introduction</h2>
<p>Netcat is a networking program that reads and writes data over the network</p>
<ul>
<li>uses both TCP and UDP protocols</li>
</ul>
<h2 id="uses_of_netcat">Uses of Netcat</h2>
<ul>
<li>port scanning</li>
<li>transferring files</li>
<li>grabbing banners</li>
<li>port listening and redirection</li>
<li>backdoor</li>
</ul>
<h2 id="installing_netcat_from_source">Installing Netcat From Source</h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>wget &lt;netcat source url&gt;
tar -xvf netcat.tar.gz
./configure
make
make install
</pre></div>
</td></tr></table>

<p><code class="codehilite">./configure</code> script creates a configuration file called as <code class="codehilite">makefile</code></p>
<h2 id="modes_of_operation">Modes of Operation</h2>
<p>Two primary modes of operation</p>
<ul>
<li>client</li>
</ul>
<p><code class="codehilite">connect to somewhere: nc [-options] hostname port[s] [ports]</code></p>
<ul>
<li>server</li>
</ul>
<p><code class="codehilite">listen for inbound: nc -l -p port [options] [hostname] [port]</code></p>
<h2 id="commands_and_flags">Commands And Flags</h2>
<h3 id="displaying_help">Displaying Help</h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>nc -h or netcat -h 
</pre></div>
</td></tr></table>

<h3 id="displaying_the_version">Displaying the Version</h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>nc -V
</pre></div>
</td></tr></table>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Run <code class="codehilite">nc -h</code> and check if there is a <code class="codehilite">-e</code> option. This means netcat can be used to execute programs on the remote machine</p>
</div>
<h3 id="close_at_end_of_the_file">Close At End Of The File</h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>nc -c
</pre></div>
</td></tr></table>

<h3 id="detach_from_the_console">Detach from the Console</h3>
<p>This runs netcat in the background mode</p>
<p><code class="codehilite">nc -d</code></p>
<h3 id="execute_a_specified_program">Execute a Specified Program</h3>
<p>Most powerful option in netcat; available only in <strong>server</strong> mode
Executes a specified program when a client connects to it</p>
<p><code class="codehilite">nc -e</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>nc -l -p 12345 -e cmd.exe (windows)
nc -l -p 12345 -e /bin/bash (linux)
</pre></div>
</td></tr></table>

<h4 id="exercise">Exercise</h4>
<ul>
<li>start a server</li>
</ul>
<p>This would start a server in the windows machine</p>
<p><code class="codehilite">nc -l -p 12345 -e cmd.exe</code></p>
<ul>
<li>connect to the server</li>
</ul>
<p><code class="codehilite">nc -v 192.168.1.26 12345</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>C:\Documents and Settings\georgia&gt;nc -v 192.168.1.21 12345
192.168.1.21: inverse host lookup failed: h_errno 11004: NO_DATA
(UNKNOWN) [192.168.1.21] 12345 (?) open
uname -a
Linux kali-rolling 4.19.0-kali5-amd64 #1 SMP Debian 4.19.37-2kali1 (2019-05-15)
x86_64 GNU/Linux
pwd
/root
ls
bookmap.gnmap
bookmap.nmap
bookmap.xml
bookudp.gnmap
bookudp.nmap
bookudp.xml
bookversionmap.gnmap
bookversionmap.nmap
bookversionmap.xml
chapter4example.exe
Desktop
</pre></div>
</td></tr></table>

<h3 id="source_routing">Source Routing</h3>
<ul>
<li>sender specifies the route that a packet takes through a network</li>
</ul>
<p><code class="codehilite">-g</code> and <code class="codehilite">-G</code> options allows to configure Netcat to use source routing</p>
<h3 id="delay_with_an_interval">Delay with an Interval</h3>
<ul>
<li>set a delay interval between lines sent or ports scanned, use the <code class="codehilite">-i</code> option</li>
<li>useful for scanning ports if rate limit is encountered</li>
</ul>
<h3 id="listening_mode">Listening Mode</h3>
<ul>
<li>use the <code class="codehilite">-l</code> option to start netcat in listening mode</li>
</ul>
<h3 id="reopen_netcat_after_close">Reopen Netcat After Close</h3>
<ul>
<li>use the <code class="codehilite">-L</code> option to reopen netcat after the original connection is closed</li>
<li>the connection remains persistent unless <code class="codehilite">^c</code> is pressed</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will work only with the <strong>Windows</strong> version of Netcat.
The GNU version will allow <code class="codehilite">-L</code> option for <strong>Tunneling</strong></p>
</div>
<h3 id="allow_numeric-only_ip_address">Allow Numeric-only Ip Address</h3>
<ul>
<li>use the <code class="codehilite">-n</code> option to allow numeric-only IP address and not reverse lookup. If used without the <code class="codehilite">-n</code> option, Netcat will display forward and reverse name and address lookup for the specified host.</li>
</ul>
<h4 id="netcat_with_the_-n_option">Netcat with the -n option</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1556)-(192.168.1.21)-(10:59:49)$ netcat -v -n 192.168.1.26 80
(UNKNOWN) [192.168.1.26] 80 (http) open
</pre></div>
</td></tr></table>

<h4 id="netcat_without_the_-n_option">Netcat without the -n option</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1557)-(192.168.1.21)-(11:00:04)$ netcat -v 192.168.1.26 80
192.168.1.26: inverse host lookup failed: Unknown host
(UNKNOWN) [192.168.1.26] 80 (http) open
</pre></div>
</td></tr></table>

<h3 id="hexdump_of_a_netcat_traffic">Hexdump Of A Netcat Traffic</h3>
<p>To do a hexdump of netcat file, use the <code class="codehilite">-o</code> option</p>
<h3 id="specify_port_in_netcat">Specify Port In Netcat</h3>
<p><code class="codehilite">nc -l -p 12345</code></p>
<p>Here, Netcat is run in server mode and listening for inbound connections on port 12345</p>
<h3 id="scan_ports_in_netcat">Scan Ports in Netcat</h3>
<p>Netcat can scan ports in <strong>client mode</strong>. More than one port can be specified separated by commas, ranges or even common port names.</p>
<p>If a range is specified, Netcat starts at the <em>top and works towards the bottom</em>. Example if netcat is asked to scan from port 20-30, it will start at 30 and work backwards to 20.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1570)-(192.168.1.21)-(11:18:36)$ netcat -z -n -v 192.168.1.26 1-1000
(UNKNOWN) [192.168.1.26] 445 (microsoft-ds) open
(UNKNOWN) [192.168.1.26] 443 (https) open
(UNKNOWN) [192.168.1.26] 180 (?) open
(UNKNOWN) [192.168.1.26] 139 (netbios-ssn) open
(UNKNOWN) [192.168.1.26] 135 (epmap) open
(UNKNOWN) [192.168.1.26] 80 (http) open
(UNKNOWN) [192.168.1.26] 25 (smtp) open
(UNKNOWN) [192.168.1.26] 21 (ftp) open
</pre></div>
</td></tr></table>

<h3 id="randomize_ports_in_netcat">Randomize Ports in Netcat</h3>
<p>Use the <code class="codehilite">-r</code> option to randomize ports. If netcat is asked to scan ports using <code class="codehilite">-r</code> option, port scan will be done in a <strong>random</strong> manner instead of <em>standard top to bottom</em> manner.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1572)-(192.168.1.21)-(11:19:32)$ netcat -n -v -z -r 192.168.1.26 1-1000
(UNKNOWN) [192.168.1.26] 443 (https) open
(UNKNOWN) [192.168.1.26] 180 (?) open
(UNKNOWN) [192.168.1.26] 21 (ftp) open
(UNKNOWN) [192.168.1.26] 445 (microsoft-ds) open
(UNKNOWN) [192.168.1.26] 80 (http) open
(UNKNOWN) [192.168.1.26] 135 (epmap) open
(UNKNOWN) [192.168.1.26] 25 (smtp) open
(UNKNOWN) [192.168.1.26] 139 (netbios-ssn) 
</pre></div>
</td></tr></table>

<h3 id="changing_source_address_of_a_packet">Changing Source Address Of A Packet</h3>
<p>use the <code class="codehilite">-s</code> option to change the source address of a packet; useful for <strong>spoofing</strong> the location of origin.</p>
<h3 id="netcat_and_telnet">Netcat and Telnet</h3>
<p>use the <code class="codehilite">-t</code> option to setup Netcat as a simple Telnet server</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1573)-(192.168.1.21)-(11:20:03)$ netcat -l -p 12345 -e /bin/bash -t
</pre></div>
</td></tr></table>

<p><strong>On Windows Machine</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>C:\Documents and Settings\georgia&gt;nc 192.168.1.21 12345
date
Sat Jul 13 11:24:50 IST 2019
</pre></div>
</td></tr></table>

<p>Use Netcat, Telnet or any client such as PuTTY to connect to this server and shell access will be provided via Telnet</p>
<h3 id="udp_and_netcat">UDP and Netcat</h3>
<p>Use the <code class="codehilite">-u</code> option for setting up Netcat for UDP connection. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>UDP is a connectionless protocol. Use timeouts with this option</p>
</div>
<h3 id="netcat_and_verbosity">Netcat and Verbosity</h3>
<p>Use the <code class="codehilite">-v</code> option to control verbosity or the amount of information that is displayed to the user. </p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Increase the verbosity with <code class="codehilite">-v</code> or <code class="codehilite">-vv</code> or <code class="codehilite">-vvv</code> options</p>
</div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1575)-(192.168.1.21)-(11:32:22)$ netcat -n -vv -z -r 192.168.1.26 1-80
(UNKNOWN) [192.168.1.26] 19 (chargen) : Connection refused
(UNKNOWN) [192.168.1.26] 76 (?) : Connection refused
(UNKNOWN) [192.168.1.26] 41 (?) : Connection refused
(UNKNOWN) [192.168.1.26] 17 (qotd) : Connection refused
(UNKNOWN) [192.168.1.26] 59 (?) : Connection refused
(UNKNOWN) [192.168.1.26] 25 (smtp) open
</pre></div>
</td></tr></table>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="codehilite">-V</code> option displays the version information and then exits.</p>
</div>
<h3 id="network_timeout_and_netcat">Network Timeout and Netcat</h3>
<p>Use the <code class="codehilite">-w</code> option to set the network inactivity timeout. <strong>Useful for closing network connections</strong> when servers don't do it automatically and for speeding up the requests.</p>
<h3 id="zero_inputoutput_mode">Zero Input/output Mode</h3>
<p>Use the <code class="codehilite">-z</code> option during Port scan. This will <strong>not send</strong> any data to a TCP connection and <strong>limited data</strong> to the UDP connection.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Netcat switches can be used individually / together. E.g. <code class="codehilite">nc -n -l -v</code> or <code class="codehilite">nc -nlv</code> </p>
</div>
<h2 id="redirector_tools">Redirector Tools</h2>
<p>Standard Unix Redirectors can be used with Netcat. The most useful are &gt;, &gt;&gt;, &lt; and the pipe (|).</p>
<p>The single "greater than" redirector will redirect output.</p>
<p><code class="codehilite">nc -l -v -p 12345 &gt; dumpfile</code></p>
<p><strong>In the first terminal</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1576)-(192.168.1.21)-(11:32:55)$ nc -l -v -p 12345 &gt; dumpfile
listening on [any] 12345 ...
connect to [192.168.1.21] from kali-rolling [192.168.1.21] 60364
</pre></div>
</td></tr></table>

<p><strong>In other terminal</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1554)-(192.168.1.21)-(10:58:59)$ nc 192.168.1.21 12345
date

uname -a

^C

(root-kali-rolling)-(jobs:0)-(~)
(!1556)-(192.168.1.21)-(12:02:49)$ cat dumpfile
date

uname -a


(root-kali-rolling)-(jobs:0)-(~)
(!1557)-(192.168.1.21)-(12:02:53)$ 
</pre></div>
</td></tr></table>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The double greater than <code class="codehilite">&gt;&gt;</code> will redirect output, but append rather than replace.</p>
<p>Useful redirector tool or pipe ("|") allows output from one command to serve as input to a second command. This can be used for scenarios like <em>compressing and sending a directory</em>.</p>
<p>Netcat can also be used to setup a relay</p>
</div>
<h2 id="basic_operations">Basic Operations</h2>
<h3 id="simple_chat_interface">Simple Chat Interface</h3>
<p><strong>First Terminal</strong> </p>
<p><code class="codehilite">nc -l -p 12345</code></p>
<p><strong>Second Terminal</strong></p>
<p><code class="codehilite">nc loalhost 12345</code></p>
<p>Text entered on one side of the connection is simply sent to the other side of the connection</p>
<h3 id="port_scanning">Port Scanning</h3>
<p><code class="codehilite">nc -n -v -w3 -r -z 192.168.1.26 21-25</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1581)-(192.168.1.21)-(12:50:05)$ nc -n -vv -r -w3 -z 192.168.1.26 21-25
(UNKNOWN) [192.168.1.26] 23 (telnet) : Connection refused
(UNKNOWN) [192.168.1.26] 22 (ssh) : Connection refused
(UNKNOWN) [192.168.1.26] 25 (smtp) open
(UNKNOWN) [192.168.1.26] 24 (?) : Connection refused
(UNKNOWN) [192.168.1.26] 21 (ftp) open
 sent 0, rcvd 0
</pre></div>
</td></tr></table>

<h4 id="port_scan_-_comma_separated">Port Scan - Comma Separated</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1586)-(192.168.1.21)-(12:53:47)$ nc -n -v -w3 -r -z 192.168.1.26 21, 80, 443
(UNKNOWN) [192.168.1.26] 21 (ftp) open
(UNKNOWN) [192.168.1.26] 80 (http) open
(UNKNOWN) [192.168.1.26] 443 (https) open

(root-kali-rolling)-(jobs:0)-(~)
(!1587)-(192.168.1.21)-(12:54:00)$ 
</pre></div>
</td></tr></table>

<h4 id="port_scan_-_ranges">Port Scan - Ranges</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>nc -v 192.192.168.1.26 1-200
</pre></div>
</td></tr></table>

<h4 id="port_scan_-_service">Port Scan - Service</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>nc -v 192.168.1.26 http
</pre></div>
</td></tr></table>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Windows services are present within <code class="codehilite">/Windows/system32/drivers/etc/services</code>. </p>
<p>Linux services are present in <code class="codehilite">/etc/services</code></p>
</div>
<h3 id="transferring_files">Transferring Files</h3>
<p><strong>First Machine</strong></p>
<p><code class="codehilite">nc -l -p 12345 &lt; dumpfile</code></p>
<p><strong>Second Machine</strong></p>
<p><code class="codehilite">nc 192.168.1.21 12345 &gt; dumpfile</code></p>
<p><strong>Pushing Files From Netcat</strong></p>
<p><em>Destination System</em></p>
<p><code class="codehilite">nc -l -p 12345 &gt; textfile</code></p>
<p><em>Source System</em></p>
<p><code class="codehilite">nc 192.168.1.26 12345 &lt; textfile</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>File transfers over Netcat is unencrypted. Use CryptCat, a version of Netcat with twofish encryption. Netcat can also be used over SSH for encrypting traffic.</p>
</div>
<h3 id="banner_grabbing">Banner Grabbing</h3>
<p>Banner grabbing is an enumeration technique, which is designed to determine the brand, version, OS info about a particular service or application. Useful for <strong>checking the vulnerability</strong> against a particular version of some service.</p>
<p>Netcat is to be started in client mode. <em>In some cases, extra info need to given</em> like the one below. In line number 4, <kbd>enter</kbd> is pressed. </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1608)-(192.168.1.21)-(10:11:56)$ nc -v 192.168.1.21 80
kali-rolling [192.168.1.21] 80 (http) open

HTTP/1.1 400 Bad Request
Date: Sun, 14 Jul 2019 04:42:14 GMT
Server: Apache/2.4.38 (Debian)
Content-Length: 301
Connection: close
Content-Type: text/html; charset=iso-8859-1

<span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;</span>
<span class="nt">&lt;html&gt;&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>400 Bad Request<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>Bad Request<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Your browser sent a request that this server could not understand.<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;hr&gt;</span>
<span class="nt">&lt;address&gt;</span>Apache/2.4.38 (Debian) Server at 127.0.1.1 Port 80<span class="nt">&lt;/address&gt;</span>
<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>

(root-kali-rolling)-(jobs:0)-(~)
(!1609)-(192.168.1.21)-(10:12:14)$ 
</pre></div>
</td></tr></table>

<p><strong>GET command can also be given which returns the same output.</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1617)-(192.168.1.21)-(10:16:13)$ nc -v 192.168.1.21 80
kali-rolling [192.168.1.21] 80 (http) open
GET / HTTP/1.1
HTTP/1.1 400 Bad Request
Date: Sun, 14 Jul 2019 04:50:13 GMT
Server: Apache/2.4.38 (Debian)
Content-Length: 301
Connection: close
Content-Type: text/html; charset=iso-8859-1

<span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;</span>
<span class="nt">&lt;html&gt;&lt;head&gt;</span>
<span class="nt">&lt;title&gt;</span>400 Bad Request<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;&lt;body&gt;</span>
<span class="nt">&lt;h1&gt;</span>Bad Request<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Your browser sent a request that this server could not understand.<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;hr&gt;</span>
<span class="nt">&lt;address&gt;</span>Apache/2.4.38 (Debian) Server at 127.0.1.1 Port 80<span class="nt">&lt;/address&gt;</span>
<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>

(root-kali-rolling)-(jobs:0)-(~)
(!1618)-(192.168.1.21)-(10:20:13)$ 
</pre></div>
</td></tr></table>

<h3 id="redirecting_ports_and_traffic">Redirecting Ports and Traffic</h3>
<p>Netcat can be used to redirect both sides of the traffic. Useful when obscuring an attack. </p>
<p><strong>How?</strong></p>
<p>The idea is to run Netcat thru a middle man so that the attack appears to be coming from the middle man and not the original source. This redirection of traffic is called a <strong>relay</strong>.</p>
<p><strong>Target Machine - Kali</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(root-kali-rolling)-(jobs:0)-(~)
(!1559)-(192.168.1.21)-(10:14:04)$ nc -l -p 54321
test
hazeez
</pre></div>
</td></tr></table>

<p><strong>Middle Man - Windows XP</strong></p>
<p><code class="codehilite">C:\Documents and Settings\georgia&gt;nc -l -p 12345 | nc 192.168.1.21 54321</code></p>
<p><strong>Source Machine - Windows 7</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>C:\Windows\system32&gt;nc 192.168.1.26 12345
test
hazeez
</pre></div>
</td></tr></table>

<p>Input from the source computer (in client mode) is sent to the relay computer (in server mode). The output is piped into a second instance of Netcat (in client mode), which ultimately connects to the target computer. This is a simple case of <strong>port redirection</strong></p>
<p><strong>Useful for</strong></p>
<ul>
<li>hide Netcat traffic on more common ports</li>
<li>change ports of applications whose normal ports might be blocked by a firewall</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The source computer has no way of receiving any response from the target computer. Solution would be to establish a second relay from the target computer back to the source computer.</p>
</div>
<h2 id="netcat_penetration_testing_features">Netcat Penetration Testing Features</h2>
<ul>
<li>port scanning and service identification</li>
<li>Egress Firewall testing</li>
<li>Avoiding detection</li>
<li>Creating a backdoor using netcat on a windows xp / 2003 server</li>
</ul>
<h2 id="introduction_1">Introduction</h2>
<ul>
<li>Netcat can keep a foothold once the system is exploited</li>
</ul>
<h2 id="port_scanning_and_service_identification">Port Scanning And Service Identification</h2>
<ul>
<li>If you <strong>cannot</strong> identify a service and or server version running on a system, it is difficult to determine any potential vulnerability information associated with it</li>
</ul>
<p>Netcat can be used for</p>
<ul>
<li>port scanning</li>
<li>identify server version information</li>
<li>identify suspicious or unknown services running on a machine</li>
</ul>
<h3 id="using_netcat_as_a_port_scanner">Using Netcat as a Port Scanner</h3>
<p><strong>Netcat Port Scanning Options</strong></p>
<table>
<thead>
<tr>
<th>Netcat Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>‐i secs</td>
<td>Delay interval for each port scanned</td>
</tr>
<tr>
<td>‐r</td>
<td>Randomize source and destination ports</td>
</tr>
<tr>
<td>‐u</td>
<td>UDP mode</td>
</tr>
<tr>
<td>‐v</td>
<td>Verbose (use –vv for twice as verbose)</td>
</tr>
<tr>
<td>‐z</td>
<td>Zero‐I/O mode (doesn't make a full connection)</td>
</tr>
<tr>
<td>Target</td>
<td>Target IP/Host that you want to scan</td>
</tr>
<tr>
<td>Port‐range</td>
<td>Port number or range to scan</td>
</tr>
</tbody>
</table>
<p><strong>syntax</strong> : <code class="codehilite">nc -v -z target port-range</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>nc -n -v -z <span class="m">192</span>.168.1.26 <span class="m">1</span>-65535
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">3306</span> <span class="o">(</span>mysql<span class="o">)</span> open
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">445</span> <span class="o">(</span>microsoft-ds<span class="o">)</span> open
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">443</span> <span class="o">(</span>https<span class="o">)</span> open
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">180</span> <span class="o">(</span>?<span class="o">)</span> open
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">139</span> <span class="o">(</span>netbios-ssn<span class="o">)</span> open
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">135</span> <span class="o">(</span>epmap<span class="o">)</span> open
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">80</span> <span class="o">(</span>http<span class="o">)</span> open
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">25</span> <span class="o">(</span>smtp<span class="o">)</span> open
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">21</span> <span class="o">(</span>ftp<span class="o">)</span> open
</pre></div>
</td></tr></table>

<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>This option is very slow; Need to see how netcat can be made faster / alternative utilities that can scan ports faster.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>if you find yourself getting blocked by an automated blocking technology, try to adjust the Netcat delay interval using the <code class="codehilite">–i</code> option. Some blockers trigger on a specific signature, timed threshold, and or sequential ports scanned. A way to determine the threashold is to adjust the interval for each port scanned. Also, to randomize the order of the target port range, use the <code class="codehilite">–r</code> option.</p>
</div>
<h3 id="banner_grabbing_1">Banner Grabbing</h3>
<ul>
<li>A useful feature of Netcat is the <strong>ability to connect to a service</strong> in an attempt to identify version information by triggering a response from the service banner. </li>
</ul>
<p><strong>Determine the version of a Web server</strong></p>
<ul>
<li>Using HTTP HEAD request</li>
<li>The HEAD method allows a client to request HTTP header information. </li>
<li>The output from the HEAD request will help us identify important information about the server, including the type and version of the Web server that is running.</li>
</ul>
<p><strong>syntax</strong>: <code class="codehilite">nc -v www.microsoft.com 80</code></p>
<p>This simply makes a TCP connection to the Web server. Once the connection is established, you need to issue the following command into the Netcat Window:</p>
<p>HEAD / HTTP/1.0
After you hit enter two times, we get the following response (http header information) from the Web server.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>C:<span class="se">\U</span>sers<span class="se">\I</span>EUser&gt;nc -v www.microsoft.com <span class="m">80</span>
DNS fwd/rev mismatch: e13678.dspb.akamaiedge.net !<span class="o">=</span> a104-91-50-11.deploy.static.
akamaitechnologies.com
e13678.dspb.akamaiedge.net <span class="o">[</span><span class="m">104</span>.91.50.11<span class="o">]</span> <span class="m">80</span> <span class="o">(</span>http<span class="o">)</span> open
HEAD / HTTP/1.0

HTTP/1.0 <span class="m">400</span> Bad Request
Server: AkamaiGHost
Mime-Version: <span class="m">1</span>.0
Content-Type: text/html
Content-Length: <span class="m">209</span>
Expires: Tue, <span class="m">23</span> Jul <span class="m">2019</span> <span class="m">22</span>:43:53 GMT
Date: Tue, <span class="m">23</span> Jul <span class="m">2019</span> <span class="m">22</span>:43:53 GMT
Connection: close
</pre></div>
</td></tr></table>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the above case, the connection was not made.</p>
</div>
<p><strong>Successful connection example below</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>C:<span class="se">\U</span>sers<span class="se">\I</span>EUser&gt;nc -v www.google.com <span class="m">80</span>
DNS fwd/rev mismatch: www.google.com !<span class="o">=</span> maa03s31-in-f4.1e100.net
www.google.com <span class="o">[</span><span class="m">216</span>.58.196.164<span class="o">]</span> <span class="m">80</span> <span class="o">(</span>http<span class="o">)</span> open
HEAD / HTTP/1.0

HTTP/1.0 <span class="m">200</span> OK
Date: Tue, <span class="m">23</span> Jul <span class="m">2019</span> <span class="m">22</span>:46:38 GMT
Expires: -1
Cache-Control: private, max-age<span class="o">=</span><span class="m">0</span>
Content-Type: text/html<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>ISO-8859-1
P3P: <span class="nv">CP</span><span class="o">=</span><span class="s2">&quot;This is not a P3P policy! See g.co/p3phelp for more info.&quot;</span>
Server: gws
X-XSS-Protection: <span class="m">0</span>
X-Frame-Options: SAMEORIGIN
Set-Cookie: <span class="nv">1P_JAR</span><span class="o">=</span><span class="m">2019</span>-07-23-22<span class="p">;</span> <span class="nv">expires</span><span class="o">=</span>Thu, <span class="m">22</span>-Aug-2019 <span class="m">22</span>:46:38 GMT<span class="p">;</span> <span class="nv">path</span><span class="o">=</span>/<span class="p">;</span>
 <span class="nv">domain</span><span class="o">=</span>.google.com
Set-Cookie: <span class="nv">NID</span><span class="o">=</span><span class="nv">188</span><span class="o">=</span>P51qMbFg5HjrBRMIiukSmxGrlVOVAmxQ8koj-KFqkLN-m81pECyJ9UUvZD-m
F0VLDoLQmzXPyfC5FIFMz5eUdn-jy0Nh3zZ1mf1fwQ4q3vxX509KNOHoGRE3XjvAV66_M9eepQQV5iWz
r17dDCZjNUxMLKsCJnDSVsg7x-fZphg<span class="p">;</span> <span class="nv">expires</span><span class="o">=</span>Wed, <span class="m">22</span>-Jan-2020 <span class="m">22</span>:46:38 GMT<span class="p">;</span> <span class="nv">path</span><span class="o">=</span>/<span class="p">;</span>
<span class="nv">domain</span><span class="o">=</span>.google.com<span class="p">;</span> HttpOnly
Accept-Ranges: none
Vary: Accept-Encoding
</pre></div>
</td></tr></table>

<p><strong>Automating Banner Grabbing Using Shell Script</strong></p>
<p>This basic loop will read the hostlist.txt file, which contains the IP addresses or domain names of the target Web server. It then issues the Netcat command and pipes the HEAD command to the established Web server connection. The request.txt file contains the HEAD request, HEAD/HTTP/1.0/n/n.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">for</span> i in <span class="sb">`</span>cat hostlist.txt <span class="sb">`</span><span class="p">;</span><span class="k">do</span>
nc -q <span class="m">2</span> -v <span class="nv">$i</span> <span class="m">80</span> &lt; request.txt
</pre></div>
</td></tr></table>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the example, the -q 2 option is important to note. If the Web server is not actually a Web server but a Netcat listener, and you don't have the -q option, your connection might not terminate. The -q 2 will ensure the connection will timeout after two seconds of the request.</p>
</div>
<p>Netcat can <strong>also</strong> be used to get banner information <strong>for services such as: File Transfer Protocol (FTP), Telnet, Secure Shell (SSH), Post Office Protocol (POP), Internet Message Access Protocol (IMAP), and Simple Mail Transfer Protocol (SMTP).</strong></p>
<p><strong>Service Identification</strong></p>
<p>Netcat can also be used to help identify an unknown or suspicious service running on a system. Say for instance you do a scan and find TCP/180 open and your scanner reports that the service is unknown. We can perform a simple connection to that port using Netcat in an attempt to get a server response, which will help identify the unknown service. Our goal is to get any information that the service will provide us.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">(</span>root-kali-rolling<span class="o">)</span>-<span class="o">(</span>jobs:0<span class="o">)</span>-<span class="o">(</span>~<span class="o">)</span>
<span class="o">(</span>!1580<span class="o">)</span>-<span class="o">(</span><span class="m">192</span>.168.1.21<span class="o">)</span>-<span class="o">(</span><span class="m">04</span>:26:08<span class="o">)</span>$ nc -n -vv <span class="m">192</span>.168.1.26 <span class="m">180</span>
<span class="o">(</span>UNKNOWN<span class="o">)</span> <span class="o">[</span><span class="m">192</span>.168.1.26<span class="o">]</span> <span class="m">180</span> <span class="o">(</span>?<span class="o">)</span> open
HEAD / HTTP/1.0

HTTP/1.0 <span class="m">401</span> Unauthorized
Server: Seattle Lab HTTP Server/1.0
Connection: close
Date: Tue, <span class="m">23</span> Jul <span class="m">2019</span> <span class="m">22</span>:56:28 GMT
WWW-Authenticate: Basic <span class="nv">realm</span><span class="o">=</span><span class="s2">&quot;Administration&quot;</span>

&lt;h1&gt;401 Unauthorized&lt;/h1&gt;
 sent <span class="m">17</span>, rcvd <span class="m">197</span>
</pre></div>
</td></tr></table>

<h2 id="egress_firewall_testing">Egress Firewall Testing</h2>
<ul>
<li>Test outbound firewall rules to verify that outbound port filtering rules are in place and working properly</li>
<li>outbound packet filtering is called as <em>egress filtering</em></li>
<li>typically organizations <strong>only focus on inbound packet filtering</strong></li>
</ul>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>Install gentoo linux and try</p>
</div>
<h2 id="avoiding_detection_on_a_window_system">Avoiding Detection On A Window System</h2>
<p>The Windows Firewall/Internet Connection Sharing (ICS) service, which was included with Windows XP SP2, provides a basic firewall that performs inbound packet filtering.</p>
<p>The <strong>firewall</strong> also detects and, by default, <strong>blocks programs that attempt to open TCP/IP sockets and listen for incoming connections</strong>. If unaware of this Windows Firewall feature, it can become a problem for a penetration tester if we create a backdoor listening for incoming connections.</p>
<p><strong>Making Firewall Exceptions Using Netsh Commands</strong></p>
<p>Netsh is a <strong>windows command line utility</strong> used to configure the windows firewall. A firewall exception allows a program or protocol to communicate over the network. The goal is to add a port that netcat will be running on to the Windows Firewall Exceptions list. </p>
<p><strong>Determining the state of the firewall</strong></p>
<p><code class="codehilite">netsh firewall show opmode</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>C:<span class="se">\D</span>ocuments and Settings<span class="se">\g</span>eorgia&gt;netsh firewall show opmode

Domain profile configuration:
-------------------------------------------------------------------
Operational <span class="nv">mode</span>                  <span class="o">=</span> Enable
Exception <span class="nv">mode</span>                    <span class="o">=</span> Enable

Standard profile configuration <span class="o">(</span>current<span class="o">)</span>:
-------------------------------------------------------------------
Operational <span class="nv">mode</span>                  <span class="o">=</span> Disable
Exception <span class="nv">mode</span>                    <span class="o">=</span> Enable

Local Area Connection firewall configuration:
-------------------------------------------------------------------
Operational <span class="nv">mode</span>                  <span class="o">=</span> Enable
</pre></div>
</td></tr></table>

<p>Looking at the Domain profile configuration (current) settings, we are interested in the Operation mode and Exception mode settings.</p>
<p>In our example the settings are configured as:</p>
<p>Operation mode = Enable
Exception mode = Enable</p>
<p>The <strong>Operation mode</strong> setting is set to <strong>Enable</strong>, which means the <strong>firewall is turned on and blocking incoming connections.</strong> The <strong>Exception mode</strong> setting is set to <strong>Enable</strong>, which tells us that the windows firewall is <strong>configured to allow exceptions to the windows firewall</strong>. This option is important because it allows us to add an exception for our Netcat listening port.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If the netsh command reports the Exception mode as Disabled, the firewall is not allowing any exceptions. In this case, we can configure the firewall to allow exceptions with the following command.</p>
<p><code class="codehilite">Netsh firewall set opmode mode = enable exceptions = enable profile = all</code></p>
</div>
<p><strong>Adding exceptions to the firewall</strong></p>
<p>We'll add an exception to the Windows firewall to allow our Netcat listener to accept incoming connections and not trigger a Windows alert. Our Netcat listener will be listening on TCP/1234. Using the following command we will add TCP port 1234 to the exceptions list and define the name of the exception.</p>
<p><code class="codehilite">netsh firewall add portopening TCP 1234 “Windows Firewall Reporting Agent” enable all</code></p>
<p><strong>output</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>C:<span class="se">\D</span>ocuments and Settings<span class="se">\g</span>eorgia&gt;netsh firewall add portopening TCP <span class="m">1234</span> <span class="s2">&quot;Windo</span>
<span class="s2">ws Firewall Reporting Agent&quot;</span> <span class="nb">enable</span> all
Ok.


C:<span class="se">\D</span>ocuments and Settings<span class="se">\g</span>eorgia&gt;netsh firewall show portopening

Port configuration <span class="k">for</span> Standard profile:
Port   Protocol  Mode     Name
-------------------------------------------------------------------
<span class="m">1234</span>   TCP       Enable   Windows Firewall Reporting Agent


C:<span class="se">\D</span>ocuments and Settings<span class="se">\g</span>eorgia&gt;nc -l -p <span class="m">1234</span>
ccat
</pre></div>
</td></tr></table>

<h3 id="evading_antivirus_detection">Evading Antivirus Detection</h3>
<p>There are <strong>two methods</strong> to avoid detection by antivirus. You can <strong>modify the source code and recompile the program</strong>, or you can use a debugger, <strong>locate the antivirus signature, and change the binary</strong>. This method is primarily used when the source code isn't available. Because the Netcat source code is available, we will modify the Netcat source code and <strong>recompile</strong> the program.</p>
<p><strong>Recompiling Netcat</strong></p>
<p>Once we have the Netcat source code, we need a Windows compiler to build the program. We will use Microsoft Visual Studio, which includes a command-line compiler, cl.exe. This compiler will work with the makefile that is included with the Netcat source files. Using the recompile method, we will make some changes to the Netcat source files.</p>
<p>Adding some comments to the source files will be enough of a change, so when the program is recompiled the signature of the program is different that the original version.</p>
<p>The makefile included with the Netcat source code has all the necessary compile options you need to recompile the program, it also has a compiler variable (cc), which needs to be defined as the compiler you are using. The compiler variable is already set to cl, therefore, if you are using Visual Studio you do not need to change anything. At the command window type make and a new Netcat program with a different signature will be created.</p>
<p>Without modifying the makefile, the make command will compile a new program called <strong>nc.exe</strong>, which is the new recompiled version of Netcat that wont be picked up by antivirus.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you encounter the following error:</p>
<p>makefile:11: *** missing separator. Stop.</p>
<p>remove the extra white space in the makefile.</p>
</div>
<h2 id="creating_a_netcat_backdoor_on_a_windows_xp_or_windows_2003_server">Creating A Netcat Backdoor On A Windows Xp Or Windows 2003 Server</h2>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../metasploit/" title="Metasploit" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Metasploit
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; ha2332-2019
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.48c2c9de.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="../../assets/javascript/jquery-min.js"></script>
      
        <script src="../../assets/javascript/mermaid.min.js"></script>
      
        <script src="../../assets/javascript/raphael.min.js"></script>
      
        <script src="../../assets/javascript/flowchart.min.js"></script>
      
        <script src="../../assets/javascript/jquery-plugin.js"></script>
      
        <script src="../../assets/javascript/extra.js"></script>
      
    
  </body>
</html>